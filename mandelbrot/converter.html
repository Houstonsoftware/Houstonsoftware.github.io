<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Исправление уравнений</title> 
  <link rel="stylesheet" href="css/normalize.css">
  <link href='http://fonts.googleapis.com/css?family=Raleway:400,700,900|Montserrat:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/responsive.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
  function isdigit(x){
    return x == "1" || x == "2" || x == "3" || x == "4" || x == "5" || x == "6" || x == "7" || x == "8" || x == "9" || x == "0";
  }
  function convert(){
    var X = 0; 
    var div = document.getElementById("myoutput");
    var html = document.getElementById("HTML");
    var inputElement = document.getElementById("S1");
    var S = inputElement.value;
    div.innerHTML = "";
    var res = "";
    for( var i = 0 ; i <= S.length; i++){
      if(X == 0){
        if (S.charAt(i) != " " && (S.charAt(i) != "+" && S.charAt(i-1) != " ") || (S.charAt(i) != "-" && S.charAt(i+1) != "-" && S.charAt(i+2) != ">")){
          X = 1;  
        }
        if(S.charAt(i) == "-" && S.charAt(i+1) == "-" && S.charAt(i+2) == ">"){
          res = res + "&rarr;"
          i+=2;
        }else{
          res = res + S.charAt(i);
        }
      }else{
        if(S.charAt(i) == "+" || S.charAt(i) == "-"){
          res = res+ "<sup>" + S.charAt(i) + "</sup>";
        }else{
          if (S.charAt(i) == " "){
            X = 0;
            res= res+ S.charAt(i);
          }else{
            if((S.charAt(i+1) == "-" || S.charAt(i+1) == "+") && isdigit(S.charAt(i))){
              res = res+ "<sup>" + S.charAt(i) + "</sup>";
              res = res + "<sup>" + S.charAt(i+1) + "</sup>";
              i++;
            }else{
              if (isdigit(S.charAt(i))  && !isdigit(S.charAt(i-1))){

                if(S.charAt(i-1) != "/" && S.charAt(i-1) != " " ){
                  res = res + "<sub>" + S.charAt(i) + "</sub>";
                  if(isdigit(S.charAt(i+1))){
                    res = res + "<sub>" + S.charAt(i+1) + "</sub>";
                    i++;
                  }
                }
                else(res = res +  S.charAt(i))
              }

            else{
              res = res + S.charAt(i);
            }
          }
        }
      }
    }

  }
  res = res.replace("</sub><sub>", "");
  res = res.replace("</sup><sup>", "");
  div.innerHTML = res;
  html.innerHTML = res;
}
</script>

</head>
<body>
  <header>
    <a href="index.html" id = "logo">
      <h1> Конвертер химических уравнений </h1>
      <h2> </h2>
      <nav>
        <ul>
          <li><a href="about.html" >Информашка</a></li>
          <li><a href="mandelbrot.html" >Мандельброт</a></li>
          <li><a href="converter.html" class= "selected">Конвертер химических уравнений</a></li>
          <li><a href="contact.html" >Контакты</a></li>
        </ul>
      </nav>
    </a>
  </header>
  <div id="wrapper">
    <section>
     <form>
      Введите формулу: 
      <input id ="S1" style="width:800px">
      <input type ="button" value="Convert" onClick= "convert();">
    </form>
    <p>HTML код формулы:</p>
    <textarea id="HTML" style=" width:800px ;height:200px"></textarea>
    <p>Превью</p>
    <div id="myoutput"></div> 
  </section>
  <footer>
    <a href="http://vk.com/mrprotos"><img src="img/vk-logo.png" alt="VKontavte logo." class="social-icon"></a>
    <a href="https://twitter.com/dmitryph"><img src="img/twitter-logo.png" alt="Twitter logo." class="social-icon"></a>
    <a href="http://tabun.everypony.ru/profile/Hell_Rider/created/topics/"><img src="img/taboon-logo.png" alt="Taboon logo." class="social-icon"></a>
  </footer>

</div>
<footer>&copy; 2015 Dmitry Filippov</footer> 
</body>
</html>













































































